# ModHeaders Modern - 简化使用指南

## 🎯 简化后的功能

根据您的要求，我已经将插件界面简化为更直观的表格形式，类似于您提供的图片样式。

### ✨ 主要改进

1. **简化的界面设计**
   - 移除了复杂的配置档案概念
   - 使用直观的表格形式管理HTTP头
   - 每行显示：复选框 + 头名称 + 头值 + 删除按钮

2. **修复了数据存储问题**
   - 使用可靠的Chrome存储API
   - 数据自动保存，实时生效
   - 支持导入/导出配置

3. **简化的操作流程**
   - 一键启用/禁用插件
   - 简单的URL模式设置
   - 直观的头管理界面

## 🚀 使用方法

### 1. 安装插件
```bash
npm run build
```
然后在Chrome中加载 `dist` 文件夹

### 2. 基本操作

#### 启用插件
- 点击插件图标打开弹窗
- 切换"启用插件"开关

#### 设置URL模式
- 在"URL模式"输入框中设置匹配规则
- 支持格式：
  - `<all_urls>` - 匹配所有URL
  - `https://example.com/*` - 匹配特定域名
  - `https://example.com/api/*` - 匹配特定路径

#### 管理HTTP头
- 点击"添加头"按钮添加新的HTTP头
- 每行包含：
  - ☑️ 复选框：启用/禁用该头
  - 📝 头名称：输入HTTP头名称
  - 📝 头值：输入HTTP头值
  - 🗑️ 删除按钮：删除该头

### 3. 高级功能

#### 导入/导出配置
- **导出**：点击"导出配置"保存当前设置到JSON文件
- **导入**：点击"导入配置"从JSON文件恢复设置

#### 清除所有数据
- 点击"清除所有"按钮重置所有配置

## 📱 界面说明

### 弹窗界面布局
```
┌─────────────────────────────────┐
│ ModHeaders - HTTP头修改工具      │
│ ● 已启用                        │
├─────────────────────────────────┤
│ ☑️ 启用插件                     │
│ URL模式: <all_urls>             │
├─────────────────────────────────┤
│ HTTP头管理                      │
│ ☑️ x-tt-env    boe_fix/table    🗑️│
│ ☑️ x-fe-name   boe_0815_hc      🗑️│
│ ☐ branch       feat-subsidy     🗑️│
│ ☑️ env         boe_employee     🗑️│
│ [+ 添加头]                      │
├─────────────────────────────────┤
│ [导出配置] [导入配置]            │
│ [高级设置] [清除所有]            │
├─────────────────────────────────┤
│ 活动规则: 3                     │
│ 配置会自动保存并实时生效         │
└─────────────────────────────────┘
```

## 🔧 技术实现

### 简化的数据结构
```typescript
interface HeaderItem {
  id: string
  name: string      // HTTP头名称
  value: string     // HTTP头值
  enabled: boolean  // 是否启用
}

interface SimpleConfig {
  headers: HeaderItem[]
  enabled: boolean
  urlPattern: string
}
```

### 存储机制
- 使用Chrome扩展的 `chrome.storage.local` API
- 数据自动保存，无需手动操作
- 支持跨设备同步（如果启用Chrome同步）

### 实时生效
- 配置更改后立即通知后台脚本
- 无需刷新页面，规则实时生效
- 支持动态启用/禁用

## 🐛 故障排除

### 常见问题

1. **插件不生效**
   - 检查"启用插件"开关是否打开
   - 确认HTTP头的复选框已勾选
   - 验证头名称和值是否填写完整

2. **数据丢失**
   - 检查Chrome存储权限
   - 尝试重新导入配置
   - 查看浏览器控制台错误信息

3. **URL模式不匹配**
   - 确认URL模式格式正确
   - 使用 `<all_urls>` 测试是否生效
   - 检查通配符使用是否正确

## 📞 技术支持

如果遇到问题：
1. 查看浏览器控制台错误信息
2. 检查Chrome扩展管理页面的错误
3. 尝试重新安装插件
4. 使用"清除所有"重置配置

---

**注意**: 这个简化版本专注于核心功能，移除了复杂的配置档案概念，使界面更加直观易用。
